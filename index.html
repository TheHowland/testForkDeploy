<!DOCTYPE html>
<html>
  <head>
    <script src="http://localhost:8000/pyodide.js"></script>
  </head>

  <body>
    <p id="title">My first Pyodide app</p>

    <script>
      
      async function main() {
        let pyodide = await loadPyodide();
        await pyodide.runPythonAsync(`
          from pyodide.http import pyfetch
          response = await pyfetch("http://localhost:8000/file.py")
          with open("file.py", "wb") as f:
              f.write(await response.bytes())
        `);
        pyFile = pyodide.pyimport("file");
        pyFile.greet();
      } 
      main();
    </script>
  </body>
</html>